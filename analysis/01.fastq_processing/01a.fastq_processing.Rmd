---
title: "01.fastq_processing"
output: html_document
date: "2025-08-08"
author: "Erica Robertson"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Getting the VCF
So this is the initial file that CH put together. I'll add the new sequence data later but I'm going to work out the code now.

```{bash}
rsync -avzP /Users/ericarobertson/Desktop/BANS_adaptive_units/data/BANS.ds6x.pass-maf-0.05.SNP.above4x..maxmiss.8.recode.vcf.gz ericacnr@colostate.edu@login.rc.colorado.edu:/scratch/alpine/ericacnr@colostate.edu/BANS
```

# Imputation

```{bash}
#!/bin/bash
#
#SBATCH --job-name=impute
#SBATCH --output=impute.%j.out
#SBATCH --error=impute.%j.err
#SBATCH -t 10:00:00
#SBATCH --partition=amilan
#SBATCH --qos=normal
#SBATCH --nodes=1
#SBATCH --ntasks-per-node 24
#SBATCH --mem=90G
#SBATCH --mail-type=START,END,FAIL
#SBATCH  --mail-user=ericacnr@colostate.edu

#echo commands to stdout

set -x
source ~/.bashrc

BEAGLE_JAR="/projects/ericacnr@colostate.edu/mambaforge/envs/bioinf/java/beagle.27Jan18.7e1.jar"
vcf="/scratch/alpine/ericacnr@colostate.edu/BANS/BANS.ds6x.pass-maf-0.05.SNP.above4x..maxmiss.8.recode.vcf.gz"

java -Xss5m -Xmx90g -jar $BEAGLE_JAR \
  gt=$vcf \
  out=BANS.ds6x.maf.0.05.SNP.above4x.maxmiss.8.imputed4.1 \
  nthreads=48

```